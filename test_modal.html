<!DOCTYPE html>
<html>
<head>
    <title>Modal Test</title>
    <style>
        .image-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            overflow: auto;
        }
        
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            animation: zoom 0.3s;
        }
        
        .modal-info {
            text-align: center;
            color: white;
            padding: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            background-color: rgba(0, 0, 0, 0.7);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        
        .modal-navigation {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .modal-navigation:hover {
            opacity: 1;
        }
        
        .modal-prev {
            left: 15px;
        }
        
        .modal-next {
            right: 15px;
        }
        
        @keyframes zoom {
            from {transform: scale(0.8); opacity: 0;}
            to {transform: scale(1); opacity: 1;}
        }
        
        .card-image-clickable {
            cursor: pointer;
            transition: transform 0.2s;
            width: 200px;
            height: auto;
            margin: 10px;
        }
        
        .card-image-clickable:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body>
    <h1>Modal Test</h1>
    
    <!-- Test images -->
    <div>
        <img src="https://via.placeholder.com/200x300?text=Card+1" 
             class="card-image-clickable" 
             data-card-index="0" 
             data-card-name="Card 1" 
             data-card-set="Set A" 
             data-image-name="card_1" 
             alt="Card 1">
        
        <img src="https://via.placeholder.com/200x300?text=Card+2" 
             class="card-image-clickable" 
             data-card-index="1" 
             data-card-name="Card 2" 
             data-card-set="Set A" 
             data-image-name="card_2" 
             alt="Card 2">
        
        <img src="https://via.placeholder.com/200x300?text=Card+3" 
             class="card-image-clickable" 
             data-card-index="2" 
             data-card-name="Card 3" 
             data-card-set="Set B" 
             data-image-name="card_3" 
             alt="Card 3">
    </div>
    
    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="modal-close">&times;</span>
        <span class="modal-navigation modal-prev">&#10094;</span>
        <span class="modal-navigation modal-next">&#10095;</span>
        <img class="modal-content" id="modalImage" alt="Card Image">
        <div class="modal-info" id="modalInfo"></div>
    </div>
    
    <script>
        // Modal functionality
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const modalInfo = document.getElementById('modalInfo');
        const closeBtn = document.querySelector('.modal-close');
        const prevBtn = document.querySelector('.modal-prev');
        const nextBtn = document.querySelector('.modal-next');
        
        let currentIndex = 0;
        let cardImages = [];
        
        // Initialize card images array when page loads
        document.addEventListener('DOMContentLoaded', function() {
            cardImages = Array.from(document.querySelectorAll('.card-image-clickable'));
            
            // Add click event to each card image
            cardImages.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openModal(index);
                });
            });
            
            // Close modal when clicking the close button
            closeBtn.addEventListener('click', closeModal);
            
            // Close modal when clicking outside the image
            modal.addEventListener('click', function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            });
            
            // Navigation buttons
            prevBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                navigateModal(-1);
            });
            
            nextBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                navigateModal(1);
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', function(event) {
                if (modal.style.display === 'block') {
                    if (event.key === 'Escape') {
                        closeModal();
                    } else if (event.key === 'ArrowLeft') {
                        navigateModal(-1);
                    } else if (event.key === 'ArrowRight') {
                        navigateModal(1);
                    }
                }
            });
        });
        
        function openModal(index) {
            if (index < 0 || index >= cardImages.length) return;
            
            currentIndex = index;
            const img = cardImages[currentIndex];
            
            // Set modal content
            modalImg.src = img.src;
            modalImg.alt = img.alt;
            modalInfo.textContent = img.dataset.cardName;
            
            // Show modal
            modal.style.display = 'block';
            
            // Update navigation button visibility
            updateNavigationButtons();
        }
        
        function closeModal() {
            modal.style.display = 'none';
        }
        
        function navigateModal(direction) {
            const newIndex = currentIndex + direction;
            
            if (newIndex >= 0 && newIndex < cardImages.length) {
                openModal(newIndex);
            }
        }
        
        function updateNavigationButtons() {
            // Navigation buttons are always visible, but we could add logic here
            // to disable them at boundaries if desired
        }
    </script>
</body>
</html>