{% extends "base.html" %}

{% block title %}Card Counter - Home{% endblock %}

{% block content %}
    <section>
        <h2>Welcome to Card Counter</h2>
        <p>Upload a CSV file and screenshots directory to identify cards in Pokémon pack screenshots.</p>
    </section>
    
    <section>
        <h3>Upload CSV</h3>
        <p>Set the local file path to your CSV file containing screenshot metadata.</p>
        
        <form method="post" action="{{ url_for('upload_csv') }}" class="grid">
            <div>
                <label for="csv_path">Local CSV Path</label>
                <input type="text" name="csv_path" id="csv_path" 
                       placeholder="D:\data\packs.csv or /mnt/d/data/packs.csv" required>
                <small>Enter Windows path (D:\data\packs.csv) or WSL2 path (/mnt/d/data/packs.csv)</small>
            </div>
            <button type="submit" class="contrast">Load CSV</button>
        </form>
    </section>
    
    <section>
        <h3>Search Cards</h3>
        <p>Search for specific cards across all processed screenshots.</p>
        
        <form method="get" action="{{ url_for('search_cards') }}" class="grid">
            <div>
                <label for="card_name">Card Name</label>
                <input type="text" name="card_name" id="card_name" placeholder="Enter card name (e.g., Pikachu)" required>
            </div>
            <button type="submit" class="contrast">Search</button>
        </form>
    </section>
    
    <section>
        <h3>Process Screenshots</h3>
        <p>Set the local file path to your screenshots directory.</p>
        
        <form method="post" action="{{ url_for('process_screenshots') }}" class="grid">
            <div>
                <label for="screenshots_path">Local Screenshots Path</label>
                <input type="text" name="screenshots_path" id="screenshots_path" 
                       placeholder="D:\ptcgp\Screenshots or /mnt/d/ptcgp/Screenshots" required>
                <small>Enter Windows path (D:\ptcgp\Screenshots) or WSL2 path (/mnt/d/ptcgp/Screenshots)</small>
            </div>
            <button type="submit" class="contrast">Process Screenshots</button>
        </form>
    </section>
    
    <section>
        <h3>Quick Stats</h3>
        <div class="grid">
            <article>
                <h4>Total Screenshots</h4>
                <p>{{ total_screenshots }}</p>
            </article>
            <article>
                <h4>Processed Screenshots</h4>
                <p>{{ processed_screenshots }}</p>
            </article>
            <article>
                <h4>Cards in Database</h4>
                <p>{{ cards_in_db }}</p>
            </article>
            <article>
                <h4>Cards Found in Screenshots</h4>
                <p>{{ total_cards_found }}</p>
            </article>
        </div>
    </section>
    
    <div class="grid">
        <a href="{{ url_for('cards') }}" class="outline" style="justify-self: start; margin-top: 2rem;">
            Browse All Cards
        </a>
        <a href="{{ url_for('debug') }}" class="secondary" style="justify-self: end; margin-top: 2rem;">
            Debug Mode →
        </a>
    </div>
{% endblock %}