{% extends "base.html" %}

{% block title %}Card Counter - Search Results{% endblock %}

{% block content %}
    <article>
        <header>
            <h2>Search Results for "{{ card_name }}"</h2>
        </header>
        
        {% if results %}
            <p>Found {{ results|length }} result(s):</p>
            
            <div class="card-grid">
                {% for result in results %}
                <div class="card">
                    <h4>{{ result.display_card_name }}</h4>
                    <p><strong>Set:</strong> {{ result.display_set_name }}</p>
                    <p><strong>Screenshot:</strong> {{ result.clean_filename }}</p>
                    <p><strong>Position:</strong> {{ result.position }}</p>
                    <p><strong>Confidence:</strong> {{ "%.1f"|format(result.confidence * 100) }}%</p>
                    
                    {% if result.card_set and result.card_name %}
                    <div style="margin-top: 1rem;">
                        <img src="/static/card_imgs/{{ result.card_set }}/{{ result.card_set }}_{{ result.card_name }}.webp"
                             alt="{{ result.display_card_name }}"
                             style="width: 100%; max-width: 200px; height: auto; border-radius: 8px;"
                             onerror="this.onerror=null; this.src='data:image/svg+xml;charset=utf-8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22279%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23ccc%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%23666%22 font-family=%22Arial%22 font-size=%2212%22>{{ result.display_card_name }}</text></svg>'">
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            
            <div class="grid" style="margin-top: 2rem;">
                <a href="{{ url_for('index') }}" class="contrast" style="justify-self: start;">
                    ← Back to Home
                </a>
                <a href="{{ url_for('cards') }}" class="outline" style="justify-self: center;">
                    Browse All Cards
                </a>
                <a href="{{ url_for('search_cards') }}" class="outline" style="justify-self: end;">
                    New Search →
                </a>
            </div>
        {% else %}
            <div class="card">
                <p>No results found for "{{ card_name }}".</p>
                <p>Try searching for a different card name or check your spelling.</p>
            </div>
            
            <div style="margin-top: 1rem;">
                <a href="{{ url_for('index') }}" class="contrast">← Back to Home</a>
            </div>
        {% endif %}
    </article>
{% endblock %}